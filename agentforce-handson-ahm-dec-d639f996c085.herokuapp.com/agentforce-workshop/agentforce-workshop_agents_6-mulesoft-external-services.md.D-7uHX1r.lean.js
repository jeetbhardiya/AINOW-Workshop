import{_ as e,c as o,a1 as r,o as a}from"./chunks/framework.BRP8cXOc.js";const n="/agentforce-workshop/agents-mulesoft-legacy-credential-complete.k_P5LB6J.webp",s="/agentforce-workshop/agents-flow-toolbox.Cn69SqKO.webp",i="/agentforce-workshop/agents-mulesoft-flow-action.c5J_yCfi.webp",l="/agentforce-workshop/agents-mulesoft-flow-action-dialog.Cj6q3nTC.webp",d="/agentforce-workshop/agents-mulesoft-flow-assignment.CczCOFLV.webp",c="/agentforce-workshop/agents-mulesoft-copilot-action.ZsOdpygh.webp",p="/agentforce-workshop/agents-mulesoft-agent-action.RmEnvHOD.webp",g="/agentforce-workshop/agents-mulesoft-copilot-configuration.BATUXL0h.webp",h="/agentforce-workshop/agents-mulesoft-response-positive.Cap8D2iz.webp",u="/agentforce-workshop/agents-mulesoft-response-negative.DW10SdoR.webp",f="/agentforce-workshop/agents-mulesoft-response-error.Cjq6E87U.webp",x=JSON.parse('{"title":"Exercise 6 (Optional): Extend Agents with MuleSoft","description":"","frontmatter":{},"headers":[],"relativePath":"agentforce-workshop/agents/6-mulesoft-external-services.md","filePath":"agentforce-workshop/agents/6-mulesoft-external-services.md"}'),m={name:"agentforce-workshop/agents/6-mulesoft-external-services.md"};function b(w,t,k,C,v,y){return a(),o("div",null,t[0]||(t[0]=[r('<h1 id="exercise-6-optional-extend-agents-with-mulesoft" tabindex="-1">Exercise 6 (Optional): Extend Agents with MuleSoft <a class="header-anchor" href="#exercise-6-optional-extend-agents-with-mulesoft" aria-label="Permalink to &quot;Exercise 6 (Optional): Extend Agents with MuleSoft&quot;">​</a></h1><p>In this exercise, you will import MuleSoft APIs into Salesforce and make them available to be integrated with Agentforce Agents. This will help Coral Clouds to efficiently manage any transactions for their customer rewards program.</p><h2 id="step-1-set-up-named-credentials" tabindex="-1">Step 1: Set up named credentials <a class="header-anchor" href="#step-1-set-up-named-credentials" aria-label="Permalink to &quot;Step 1: Set up named credentials&quot;">​</a></h2><ol><li><p>Open the <strong>Setup Menu</strong> and click <strong>Setup</strong>.</p></li><li><p>In the quick find, search for <strong>Named Credentials</strong> and click <strong>Named Credentials</strong>.</p></li><li><p>Click on the dropdown besides <strong>New</strong> and select <strong>New Legacy</strong>.</p></li><li><p>Configure the credential as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Label</td><td><code>RewardAPI</code></td></tr><tr><td>Name</td><td>Keep default</td></tr><tr><td>URL</td><td><code>https://coralcloud-agentforce-sys-api-ues9o0.5sc6y6-2.usa-e2.cloudhub.io/</code></td></tr></tbody></table></li><li><p>Click <strong>Save</strong>.</p><p>Use the screenshot below to confirm that you entered the right values.</p><p><img src="'+n+'" alt="" data-zoomable="true"></p></li></ol><h2 id="step-2-import-external-services" tabindex="-1">Step 2: Import external services <a class="header-anchor" href="#step-2-import-external-services" aria-label="Permalink to &quot;Step 2: Import external services&quot;">​</a></h2><p>In this step, you will import pre-existing MuleSoft APIs from Anypoint Exchange. We have created the Rewards API for Coral Cloud Customers and already published it in <a href="https://anypoint.mulesoft.com/exchange/d8685a28-1623-4e32-a79a-df431505f4fd/coral-cloud-rewards-sys-api/minor/1.0/console/summary/" target="_blank" rel="noreferrer">Anypoint Exchange</a>.</p><ol><li><p>From <strong>Setup</strong>, open <strong>External Services</strong>.</p></li><li><p>Click <strong>Add an External Service</strong>.</p></li><li><p>Select <strong>Reroute to MuleSoft Services UI</strong>, then click <strong>Next</strong>.</p></li><li><p>Click <strong>Confirm</strong> on the dialog.</p></li><li><p>Click <strong>Log In</strong> to log into MuleSoft Anypoint Platform, and confirm the log in.</p></li><li><p>Enter the following credentials in the MuleSoft login screen:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Username</td><td>coralclouduser</td></tr><tr><td>Password</td><td>Coralclouduser@2024</td></tr></tbody></table></li><li><p>Click <strong>Sign In</strong>.</p></li><li><p>Click <strong>Confirm</strong> on the dialog.</p></li><li><p>Click <strong>Import</strong>.</p></li><li><p>Select the MuleSoft API titled <strong>coralcloud-rewards-api</strong> with the latest version then click <strong>Next</strong>.</p></li><li><p>Set the service details:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Name</td><td><code>Rewards</code></td></tr><tr><td>Description</td><td>Keep default</td></tr><tr><td>Named Credential</td><td><code>RewardAPI</code></td></tr></tbody></table></li><li><p>Click <strong>Save &amp; Next</strong>.</p></li><li><p>Select all operations by clicking on the <strong>checkbox</strong> to the left of the <strong>Operation Name</strong> table header.</p></li><li><p>Click <strong>Finish</strong>.</p></li></ol><h2 id="step-3-create-the-flow" tabindex="-1">Step 3: Create the flow <a class="header-anchor" href="#step-3-create-the-flow" aria-label="Permalink to &quot;Step 3: Create the flow&quot;">​</a></h2><ol><li><p>From <strong>Setup</strong>, open <strong>Flows</strong>.</p></li><li><p>Click <strong>New Flow</strong>.</p></li><li><p>Leave <strong>Start from Scratch</strong> selected and click <strong>Next</strong>.</p></li><li><p>Select <strong>Autolaunched Flow (No Trigger)</strong> and click <strong>Create</strong>.</p></li><li><p>Open the <strong>Resources</strong> panel by clicking the sidebar icon to the left of the <strong>Select Elements</strong> button.</p><p><img src="'+s+'" alt="" data-zoomable="true"></p></li><li><p>Using the <strong>New Resource</strong> button, create two variables defined as follows:</p><table tabindex="0"><thead><tr><th><strong>Resource Type</strong></th><th><strong>API Name</strong></th><th><strong>Description</strong></th><th><strong>Data Type</strong></th><th><strong>Available for input</strong></th><th><strong>Available for output</strong></th></tr></thead><tbody><tr><td>Variable</td><td><code>rewardId</code></td><td><code>The Reward Id that has rewards points associated.</code></td><td>Number</td><td>✅</td><td>Unchecked</td></tr><tr><td>Variable</td><td><code>rewardPoints</code></td><td><code>The Reward points of the Coral Cloud customer.</code></td><td>Text</td><td>Unchecked</td><td>✅</td></tr></tbody></table></li></ol><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Writing clear and informative descriptions is a crucial part of building actions. It allows the planner to select the right actions, populate inputs with the right values, and correctly interpret outputs.</p></div><h3 id="define-the-mulesoft-api-call" tabindex="-1">Define the MuleSoft API call <a class="header-anchor" href="#define-the-mulesoft-api-call" aria-label="Permalink to &quot;Define the MuleSoft API call&quot;">​</a></h3><ol><li><p>Mouse over the circle after the <strong>Start</strong> element, click <strong>+</strong>, and select <strong>Action</strong>.</p></li><li><p>Select the action <strong>Get Rewards By Reward Id</strong>.</p><p><img src="'+i+'" alt="" data-zoomable="true"></p></li><li><p>Configure the Action element as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Label</td><td><code>Get Reward Points by Reward Id</code></td></tr><tr><td>API Name</td><td>Keep default</td></tr><tr><td>Description</td><td><code>The Reward Id that has rewards points associated</code></td></tr><tr><td>Reward Id</td><td><code>{!rewardId}</code></td></tr></tbody></table><p>You can use the screenshot below to confirm that you entered the right values.</p><p><img src="'+l+'" alt="" data-zoomable="true"></p></li><li><p>Click <strong>Done</strong>.</p></li></ol><h3 id="store-the-api-result" tabindex="-1">Store the API result <a class="header-anchor" href="#store-the-api-result" aria-label="Permalink to &quot;Store the API result&quot;">​</a></h3><ol><li><p>Mouse over the circle after <strong>Get Reward Points By Customer Id</strong>, click <strong>+</strong>, and select <strong>Assignment</strong>.</p></li><li><p>Configure the Assignment element as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Label</td><td><code>Output of the API call</code></td></tr><tr><td>API Name</td><td>Keep default</td></tr><tr><td>Description</td><td><code>Storing the output of the reward points API call.</code></td></tr></tbody></table></li><li><p>Set the following variable assignment:</p><table tabindex="0"><thead><tr><th><strong>Variable</strong></th><th><strong>Operator</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>rewardPoints</td><td>Equals</td><td><strong>{!Get_Reward_By_Id.200.pointsRequired}</strong></td></tr></tbody></table><p>Use the screenshot below to confirm that you entered the right values.</p><p><img src="'+d+'" alt="" data-zoomable="true"></p></li></ol><h3 id="save-and-activate-the-flow" tabindex="-1">Save and activate the Flow <a class="header-anchor" href="#save-and-activate-the-flow" aria-label="Permalink to &quot;Save and activate the Flow&quot;">​</a></h3><ol><li><p>Click <strong>Save</strong> from the top banner.</p></li><li><p>Configure the Flow as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Label</td><td><code>Get Customer Reward Points</code></td></tr><tr><td>API Name</td><td>Keep default</td></tr><tr><td>Description</td><td><code>This Flows fetches customer reward points for a given reward Id.</code></td></tr></tbody></table></li><li><p>Click <strong>Save</strong>.</p></li><li><p>Click <strong>Activate</strong>.</p></li><li><p>Click the <strong>back arrow button</strong> to leave Flow Builder and go back to Setup.</p></li></ol><h2 id="step-4-create-the-agent-custom-action" tabindex="-1">Step 4: Create the agent custom action <a class="header-anchor" href="#step-4-create-the-agent-custom-action" aria-label="Permalink to &quot;Step 4: Create the agent custom action&quot;">​</a></h2><ol><li><p>From Setup, open <strong>Agent Actions</strong>.</p></li><li><p>Click <strong>New Agent Action</strong>.</p></li><li><p>Configure the action as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Reference Action Type</td><td>Flow</td></tr><tr><td>Reference Action</td><td>Get Customer Reward Points</td></tr><tr><td>Agent Action Label</td><td>Keep default</td></tr><tr><td>Agent Action API Name</td><td>Keep default</td></tr></tbody></table><p><img src="'+c+'" alt="" data-zoomable="true"></p></li><li><p>Click <strong>Next</strong>.</p></li><li><p>Leave the default instructions in.</p></li><li><p>Check <strong>Require Input</strong> in the <strong>Input section</strong>.</p></li><li><p>Check <strong>Show in conversation</strong> in the <strong>Output section</strong>.</p></li><li><p>Click <strong>Finish</strong>.</p></li></ol><h2 id="step-5-add-the-action-to-your-agent" tabindex="-1">Step 5: Add the action to your agent <a class="header-anchor" href="#step-5-add-the-action-to-your-agent" aria-label="Permalink to &quot;Step 5: Add the action to your agent&quot;">​</a></h2><ol><li><p>From Setup, open <strong>Agents</strong> (under Agent Studio).</p></li><li><p>Click on <strong>Einstein Copilot</strong> in the list of agents.</p></li><li><p>Click <strong>Open in Builder</strong>.</p></li><li><p>Click <strong>Deactivate</strong> to deactivate the agent, so that you can add a new custom action.</p></li><li><p>In the Topics sidebar, click the <strong>CustomerServiceAssistant</strong> tab.</p><p><img src="'+p+'" alt="" data-zoomable="true"></p></li><li><p>Go to <strong>This Topic&#39;s Actions</strong> tab.</p></li><li><p>Select <strong>New</strong> and from the dropdown list choose <strong>Add from Asset Library</strong>.</p><p><img src="'+g+'" alt="" data-zoomable="true"></p></li><li><p>Check the <strong>Get Customer Reward Points</strong> action and click <strong>Finish</strong>.</p><p><img src="'+h+'" alt="" data-zoomable="true"></p></li><li><p>Go back to the <strong>Topic Configuration</strong> tab and add a new instruction. Click on <strong>Add Instruction</strong> and add the following instruction:</p><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki Codey High Noon vp-code" tabindex="0"><code><span class="line"><span>Ask for Reward Id when the user wants Reward points. Make sure the Reward Id is a number</span></span></code></pre></div></li></ol><h2 id="step-6-try-it-out" tabindex="-1">Step 6: Try it out <a class="header-anchor" href="#step-6-try-it-out" aria-label="Permalink to &quot;Step 6: Try it out&quot;">​</a></h2><ol><li><p><strong>Activate</strong> the Builder and refresh the <strong>Conversation Preview</strong>.</p></li><li><p>In the Conversation Preview panel, enter the following prompt:</p><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki Codey High Noon vp-code" tabindex="0"><code><span class="line"><span>Get me the Reward Points for Reward Id 3553.</span></span></code></pre></div><p><img src="'+u+'" alt="" data-zoomable="true"></p><p>In the planner, notice that the reasoning engine will select <strong>Get Customer Reward Points</strong> action.</p></li><li><p>Try entering a wrong prompt with an incorrect Reward Id, for example:</p><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki Codey High Noon vp-code" tabindex="0"><code><span class="line"><span>Get customer Reward Points for Reward Id 36bfc</span></span></code></pre></div><p><img src="'+f+'" alt="" data-zoomable="true"></p></li></ol>',22)]))}const A=e(m,[["render",b]]);export{x as __pageData,A as default};
