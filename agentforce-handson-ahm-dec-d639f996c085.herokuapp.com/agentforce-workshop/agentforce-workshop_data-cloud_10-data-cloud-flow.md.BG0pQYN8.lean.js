import{_ as e,c as a,a1 as o,o as r}from"./chunks/framework.BRP8cXOc.js";const s="/agentforce-workshop/data-cloud-10-flow-1.DNHuNprh.webp",l="/agentforce-workshop/data-cloud-10-flow-2.CJMRIeP8.webp",n="/agentforce-workshop/data-cloud-10-flow-3.CT5gsowd.webp",d="/agentforce-workshop/data-cloud-10-flow-4.CVVQU2Zg.webp",i="/agentforce-workshop/data-cloud-10-flow-5.iSV7PgIP.webp",c="/agentforce-workshop/data-cloud-10-flow-6.CWbkVQvE.webp",p="/agentforce-workshop/data-cloud-10-flow-7.CQXX-fhJ.webp",k=JSON.parse('{"title":"Exercise 11 (Optional): Query Data Cloud Data in a Flow","description":"","frontmatter":{},"headers":[],"relativePath":"agentforce-workshop/data-cloud/10-data-cloud-flow.md","filePath":"agentforce-workshop/data-cloud/10-data-cloud-flow.md"}'),h={name:"agentforce-workshop/data-cloud/10-data-cloud-flow.md"};function g(u,t,b,f,w,C){return r(),a("div",null,t[0]||(t[0]=[o('<h1 id="exercise-11-optional-query-data-cloud-data-in-a-flow" tabindex="-1">Exercise 11 (Optional): Query Data Cloud Data in a Flow <a class="header-anchor" href="#exercise-11-optional-query-data-cloud-data-in-a-flow" aria-label="Permalink to &quot;Exercise 11 (Optional): Query Data Cloud Data in a Flow&quot;">​</a></h1><p>In this exercise, you’ll create a flow that queries data in Data Cloud and allows you to bring it into a Lightning record page with Flow.</p><h2 id="step-1-create-a-flow-that-queries-for-data-cloud-data" tabindex="-1">Step 1: Create a flow that queries for Data Cloud data <a class="header-anchor" href="#step-1-create-a-flow-that-queries-for-data-cloud-data" aria-label="Permalink to &quot;Step 1: Create a flow that queries for Data Cloud data&quot;">​</a></h2><h3 id="create-a-new-flow" tabindex="-1">Create a new flow <a class="header-anchor" href="#create-a-new-flow" aria-label="Permalink to &quot;Create a new flow&quot;">​</a></h3><ol><li><p>In <strong>Setup</strong>, search for <strong>Flow</strong> in Quick Find and select <strong>Flows</strong>.</p></li><li><p>Click <strong>New Flow</strong>.</p></li><li><p>Leave <strong>Start from Scratch</strong> selected and click <strong>Next</strong>.</p></li><li><p>Select <strong>Screen Flow</strong> and click <strong>Create</strong>.</p></li><li><p>Open the <strong>Resources</strong> panel by clicking the sidebar icon to the left of the Select Elements button.</p><p><img src="'+s+'" alt="" data-zoomable="true"></p></li><li><p>Using the <strong>New Resource</strong> button, create one variable defined as follows:</p><table tabindex="0"><thead><tr><th><strong>Resource Type</strong></th><th><strong>API Name</strong></th><th><strong>Description</strong></th><th><strong>Data Type</strong></th><th><strong>Available for input</strong></th><th><strong>Available for output</strong></th></tr></thead><tbody><tr><td>Variable</td><td><code>recordId</code></td><td><code>The Record Id that is used to query the case details and gather relevant information.</code></td><td>Text</td><td>✅</td><td>Unchecked</td></tr></tbody></table></li></ol><h3 id="get-the-related-case-record" tabindex="-1">Get the related Case record <a class="header-anchor" href="#get-the-related-case-record" aria-label="Permalink to &quot;Get the related Case record&quot;">​</a></h3><ol><li><p>Mouse over the circle under the <strong>Start</strong> element, click <strong>+</strong>, and select <strong>Get Records</strong>.</p></li><li><p>In the right panel, configure the Get Records action as follows:.</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Label</td><td>Get Case Record</td></tr><tr><td>API Name</td><td>Keep default</td></tr><tr><td>Description</td><td>Get the case details from the case that triggered the flow.</td></tr><tr><td>Data Source</td><td>Salesforce Object</td></tr><tr><td>Object</td><td>Case</td></tr><tr><td>Condition Requirements</td><td>All Condition is Met (AND)</td></tr></tbody></table></li><li><p>Define the three conditions below:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Operator</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Id</td><td>Equals</td><td>recordId</td></tr></tbody></table></li><li><p>Under <strong>How Many Records to Store</strong>, leave the default value <strong>Only the first record</strong>.</p></li><li><p>Under <strong>How to Store Record Data</strong>, leave the default value <strong>Automatically store all fields</strong>.</p><p><img src="'+l+'" alt="" data-zoomable="true"></p></li></ol><h3 id="get-the-the-reservations-from-data-cloud" tabindex="-1">Get the the reservations from Data Cloud <a class="header-anchor" href="#get-the-the-reservations-from-data-cloud" aria-label="Permalink to &quot;Get the the reservations from Data Cloud&quot;">​</a></h3><ol><li><p>Mouse over the circle under the <strong>Get Case Records</strong> element, click <strong>+</strong> and select <strong>Get Records</strong>.</p></li><li><p>In the right panel, configure the Get Records action as follows:.</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Label</td><td>Get Data Cloud Reservations</td></tr><tr><td>API Name</td><td>Keep default</td></tr><tr><td>Description</td><td>Get the reservation data from Data Cloud through the Contacts External Id.</td></tr><tr><td>Data Source</td><td>Data Cloud Object</td></tr><tr><td>Data Space</td><td>default</td></tr><tr><td>Object</td><td>Reservation</td></tr><tr><td>Condition Requirements</td><td>All Condition is Met (AND)</td></tr></tbody></table><p><img src="'+n+'" alt="" data-zoomable="true"></p></li><li><p>Define the three conditions below:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Operator</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Contact_ID__c</td><td>Equals</td><td>Case from Get_Case_Record &gt; Contact &gt; External_Id__c</td></tr><tr><td>Check_in_Date__c</td><td>Greater Than or Equal</td><td>$Flow &gt; Current Date</td></tr></tbody></table></li><li><p>Set the Sort Records conditions as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Sort Order</td><td>Ascending</td></tr><tr><td>Sort By</td><td>Creation_Date__c</td></tr></tbody></table></li><li><p>Under <strong>How Many Records to Store</strong>, leave the default value <strong>Only the first record</strong>.</p></li><li><p>Under <strong>How to Store Record Data</strong>, leave the default value <strong>Automatically store all fields</strong>.</p><p><img src="'+d+`" alt="" data-zoomable="true"></p></li></ol><h3 id="display-the-reservation-details-and-collect-task-details" tabindex="-1">Display the Reservation details and collect Task details <a class="header-anchor" href="#display-the-reservation-details-and-collect-task-details" aria-label="Permalink to &quot;Display the Reservation details and collect Task details&quot;">​</a></h3><ol><li><p>Mouse over the circle under the <strong>Get Data Cloud Reservations</strong> element, click <strong>+</strong>, and select <strong>Screen</strong>.</p></li><li><p>In the right panel, configure the Screen Properties as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Label</td><td>Create Task</td></tr><tr><td>API Name</td><td>Keep default</td></tr><tr><td>Description</td><td>Display reservation details and create task</td></tr></tbody></table></li><li><p>In the component sidebar, search for <strong>Display Text</strong>.</p></li><li><p>Drag the <strong>Display Text</strong> component into the screen.</p></li><li><p>In the right panel, configure the Display Text Properties as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>API Name</td><td>Reservation_Details</td></tr></tbody></table></li><li><p>Set the components value as follows:</p><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki Codey High Noon vp-code" tabindex="0"><code><span class="line"><span>Guest Details</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Name: {!Get_Case_Record.Contact.FirstName}</span></span>
<span class="line"><span>Lifetime Value: {!Get_Case_Record.Contact.Lifetime_Value__c}</span></span>
<span class="line"><span>Lifetime Reservations: {!Get_Case_Record.Contact.Lifetime_Reservations__c}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Reservation Details</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Check-in Date: {!Get_Data_Cloud_Reservations.Check_in_Date__c}</span></span>
<span class="line"><span>Special Requests: {!Get_Data_Cloud_Reservations.Special_Requests__c}</span></span>
<span class="line"><span>Room Type: {!Get_Data_Cloud_Reservations.Room_Type__c}</span></span>
<span class="line"><span>Reservation Number:{!Get_Data_Cloud_Reservations.Reservation_ID__c}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Create Follow-up Task</span></span></code></pre></div></li><li><p>In the component sidebar, search for <strong>Text</strong>.</p></li><li><p>Drag the <strong>Text</strong> component into the screen.</p></li><li><p>In the right panel, configure the Text Properties as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Label</td><td>Subject</td></tr><tr><td>API Name</td><td>Subject</td></tr><tr><td>Required</td><td>✅</td></tr></tbody></table></li><li><p>Drag the <strong>Long Text Area</strong> component into the screen.</p></li><li><p>In the right panel, configure the <strong>Long Text Area</strong> Properties as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Label</td><td>Description</td></tr><tr><td>API Name</td><td>Description</td></tr><tr><td>Required</td><td>✅</td></tr></tbody></table></li><li><p>Click on <strong>Done</strong> to finish configuring the screen.</p></li></ol><h3 id="create-a-follow-up-task" tabindex="-1">Create a follow-up Task <a class="header-anchor" href="#create-a-follow-up-task" aria-label="Permalink to &quot;Create a follow-up Task&quot;">​</a></h3><ol><li><p>Mouse over the circle under the <strong>Display Reservations</strong> element, click <strong>+</strong>, and select <strong>Create Records</strong>.</p></li><li><p>In the right panel, configure the Get Records action as follows:.</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Label</td><td>Create Follow Up Task</td></tr><tr><td>API Name</td><td>Keep default</td></tr><tr><td>Description</td><td>Create a follow-up task for the user to address the customer upon check-in.</td></tr><tr><td>How to Set the Record Field Values</td><td>Manually (default)</td></tr><tr><td>Create a Record of This Object</td><td>Task</td></tr></tbody></table></li><li><p>Set the following field values from the case:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Subject</td><td>Subject</td></tr><tr><td>Description</td><td>Description</td></tr><tr><td>ActivityDate</td><td><code>{!Get_Data_Cloud_Reservations.Check_in_Date__c}</code></td></tr><tr><td>Priority</td><td>High</td></tr><tr><td>WhoId</td><td><code>{!Get_Case_Record.ContactId}</code></td></tr><tr><td>WhatId</td><td><code>{!Get_Case_Record.Id}</code></td></tr></tbody></table></li></ol><h3 id="save-and-activate-the-flow" tabindex="-1">Save and activate the flow <a class="header-anchor" href="#save-and-activate-the-flow" aria-label="Permalink to &quot;Save and activate the flow&quot;">​</a></h3><ol><li><p>Click <strong>Save</strong> and configure the flow as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Flow Label</td><td>Create Reservation Follow-up</td></tr><tr><td>Flow API Name</td><td>Keep default</td></tr><tr><td>Description</td><td>This Flows helps service agents create a follow up task for their guests who are experiencing issues.</td></tr></tbody></table></li><li><p>Click <strong>Save</strong>.</p></li><li><p>Click <strong>Activate</strong>.</p><p>Your flow should look like the following:</p><p><img src="`+i+'" alt="" data-zoomable="true"></p></li><li><p>Click the <strong>back arrow button</strong> to leave Flow Builder and go back to Setup.</p></li></ol><h2 id="step-2-create-a-flow-quick-action" tabindex="-1">Step 2: Create a flow quick action <a class="header-anchor" href="#step-2-create-a-flow-quick-action" aria-label="Permalink to &quot;Step 2: Create a flow quick action&quot;">​</a></h2><ol><li><p>In Setup, Click on the <strong>Object Manager Tab</strong>.</p></li><li><p>Select the <strong>Case</strong> object.</p></li><li><p>Click on <strong>Buttons, Links, and Actions</strong> in the sidebar.</p></li><li><p>Click on <strong>New Action</strong>.</p></li><li><p>Configure the action as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Action Type</td><td>Flow</td></tr><tr><td>Flow</td><td>Create Reservation Follow-up</td></tr><tr><td>Label</td><td>Create Follow-up Task</td></tr><tr><td>Name</td><td>Leave the Default Value</td></tr><tr><td>Description</td><td>Create a Reservation follow-up task from the case record page</td></tr></tbody></table></li><li><p>Click on <strong>Save</strong>.</p><p><img src="'+c+'" alt="" data-zoomable="true"></p></li></ol><h2 id="step-3-add-the-flow-to-the-case-record-page" tabindex="-1">Step 3: Add the flow to the Case Record page <a class="header-anchor" href="#step-3-add-the-flow-to-the-case-record-page" aria-label="Permalink to &quot;Step 3: Add the flow to the Case Record page&quot;">​</a></h2><ol><li><p>In the <strong>App Launcher</strong>, select the <strong>Coral Cloud</strong> app, click the <strong>Cases tab</strong>, and click the <strong>Upcoming Reservation Upgrade Request</strong> record.</p></li><li><p>Click the <strong>Setup</strong> icon and select <strong>Edit Page</strong>.</p></li><li><p>Click on the <strong>Highlights Panel</strong> component.</p></li><li><p>In the component Properties, click on <strong>Add Action</strong>.</p></li><li><p>Add the <strong>Create Follow-up Task</strong> action.</p><p><img src="'+p+'" alt="" data-zoomable="true"></p></li><li><p>Click on <strong>Done</strong>.</p></li><li><p>Drag it to the top of the action list.</p></li><li><p>Save the Record page.</p></li><li><p>Click the <strong>back arrow button</strong> to leave Lightning App Builder and go back to the Case page.</p></li></ol><h2 id="step-4-test-the-flow" tabindex="-1">Step 4: Test the flow <a class="header-anchor" href="#step-4-test-the-flow" aria-label="Permalink to &quot;Step 4: Test the flow&quot;">​</a></h2><ol><li><p>Click on the <strong>Create Follow-up Task</strong> action.</p></li><li><p>Complete the flow screen as follows:</p><table tabindex="0"><thead><tr><th><strong>Field</strong></th><th><strong>Value</strong></th></tr></thead><tbody><tr><td>Subject</td><td>Priority: Check for upgrade at check-in</td></tr><tr><td>Details</td><td>Sofia is a high profile customer and we would love to provide her an upgrade if possible. Please check availability and prioritize.</td></tr></tbody></table></li><li><p>Click on <strong>Done</strong>.</p></li></ol><h2 id="summary" tabindex="-1">Summary <a class="header-anchor" href="#summary" aria-label="Permalink to &quot;Summary&quot;">​</a></h2><p>In this exercise, you used Flow to query CRM and Data Cloud data and bring them both together to create a task.</p>',23)]))}const _=e(h,[["render",g]]);export{k as __pageData,_ as default};
